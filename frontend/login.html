<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SenseLense â€” Sign In</title>
    <meta name="description" content="Employee login for SenseLense AI Sales Intelligence Platform." />
    <link rel="stylesheet" href="css/styles.css" />
    <script>
        /* Apply saved theme + accent immediately */
        (function () {
            var t = localStorage.getItem('sl-theme');
            if (t === 'light') document.documentElement.setAttribute('data-theme', 'light');
            var accent = localStorage.getItem('sl-accent');
            if (accent) {
                var r = parseInt(accent.slice(1, 3), 16), g = parseInt(accent.slice(3, 5), 16), b = parseInt(accent.slice(5, 7), 16);
                var root = document.documentElement;
                root.style.setProperty('--red', accent);
                root.style.setProperty('--red-glow', 'rgba(' + r + ',' + g + ',' + b + ',.25)');
            }
            /* If already logged in, go to dashboard */
            if (localStorage.getItem('sl-user')) window.location.replace('index.html');
        })();
    </script>
    <style>
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            min-height: 100vh;
            background: var(--surface-0, #0a0a0a);
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            position: relative;
            overflow: hidden;
        }

        /* Ambient glow background */
        .bg-glow {
            position: fixed;
            inset: 0;
            pointer-events: none;
        }

        .bg-glow::before {
            content: '';
            position: absolute;
            top: -20%;
            left: 50%;
            transform: translateX(-50%);
            width: 600px;
            height: 600px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(204, 0, 0, .12) 0%, transparent 65%);
            animation: glow-breathe 4s ease-in-out infinite;
        }

        @keyframes glow-breathe {

            0%,
            100% {
                transform: translateX(-50%) scale(1);
                opacity: .8;
            }

            50% {
                transform: translateX(-50%) scale(1.15);
                opacity: 1;
            }
        }

        /* Grid lines */
        .bg-grid {
            position: fixed;
            inset: 0;
            pointer-events: none;
            background-image: linear-gradient(rgba(255, 255, 255, .025) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, .025) 1px, transparent 1px);
            background-size: 48px 48px;
        }

        /* Login card */
        .login-card {
            background: var(--surface-2, #161616);
            border: 1px solid rgba(255, 255, 255, .08);
            border-radius: 24px;
            padding: 48px 44px 40px;
            width: 420px;
            max-width: calc(100vw - 32px);
            box-shadow: 0 48px 100px rgba(0, 0, 0, .6), 0 0 0 1px rgba(255, 255, 255, .04);
            position: relative;
            z-index: 1;
            animation: card-rise .6s cubic-bezier(.34, 1.56, .64, 1) both;
        }

        @keyframes card-rise {
            from {
                opacity: 0;
                transform: translateY(32px) scale(.96);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        /* Logo */
        .login-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 32px;
        }

        .login-logo svg {
            height: 28px;
            width: auto;
            color: var(--red, #CC0000);
        }

        .login-logo-text {
            font-size: 14px;
            font-weight: 700;
            color: var(--text-primary, #f2f2f2);
            letter-spacing: .04em;
        }

        h1 {
            font-size: 26px;
            font-weight: 800;
            color: var(--text-primary, #f2f2f2);
            margin-bottom: 6px;
        }

        .login-sub {
            font-size: 13px;
            color: var(--text-muted, #666);
            margin-bottom: 32px;
        }

        /* Avatar picker */
        .avatar-section {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }

        .avatar-preview {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--red, #CC0000), #770000);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            font-weight: 800;
            color: #fff;
            position: relative;
            cursor: pointer;
            flex-shrink: 0;
            border: 2px solid rgba(255, 255, 255, .1);
            overflow: hidden;
            transition: border-color .2s ease;
        }

        .avatar-preview:hover {
            border-color: var(--red, #CC0000);
        }

        .avatar-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            inset: 0;
        }

        .avatar-upload-hint {
            position: absolute;
            inset: 0;
            border-radius: 50%;
            background: rgba(0, 0, 0, .55);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity .2s;
        }

        .avatar-preview:hover .avatar-upload-hint {
            opacity: 1;
        }

        .avatar-upload-hint svg {
            color: #fff;
        }

        #avatar-file {
            display: none;
        }

        .avatar-info {
            font-size: 12px;
            color: var(--text-muted, #666);
            line-height: 1.5;
        }

        .avatar-info strong {
            display: block;
            font-size: 13px;
            color: var(--text-secondary, #999);
            margin-bottom: 2px;
        }

        /* Form fields */
        .field {
            margin-bottom: 16px;
        }

        .field label {
            display: block;
            font-size: 11px;
            font-weight: 700;
            letter-spacing: .08em;
            text-transform: uppercase;
            color: var(--text-muted, #666);
            margin-bottom: 7px;
        }

        .input-wrap {
            position: relative;
        }

        .input-wrap svg {
            position: absolute;
            left: 13px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted, #555);
            pointer-events: none;
        }

        .field input {
            width: 100%;
            background: var(--surface-1, #0f0f0f);
            border: 1px solid var(--border, rgba(255, 255, 255, .07));
            border-radius: 10px;
            color: var(--text-primary, #f2f2f2);
            font-size: 14px;
            font-family: inherit;
            padding: 11px 14px 11px 40px;
            outline: none;
            transition: border-color .2s ease, box-shadow .2s ease;
        }

        .field input:focus {
            border-color: var(--red, #CC0000);
            box-shadow: 0 0 0 3px var(--red-glow, rgba(204, 0, 0, .2));
        }

        .field input::placeholder {
            color: var(--text-muted, #555);
        }

        /* Submit button */
        .btn-login {
            width: 100%;
            margin-top: 8px;
            background: var(--red, #CC0000);
            border: none;
            border-radius: 10px;
            color: #fff;
            font-size: 15px;
            font-weight: 700;
            padding: 14px;
            cursor: pointer;
            font-family: inherit;
            transition: all .2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-login:hover {
            filter: brightness(1.12);
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(204, 0, 0, .35);
        }

        .btn-login:active {
            transform: translateY(0);
        }

        .login-footer-note {
            text-align: center;
            margin-top: 20px;
            font-size: 11px;
            color: var(--text-muted, #555);
        }

        /* Error shake */
        @keyframes shake {

            0%,
            100% {
                transform: translateX(0)
            }

            20% {
                transform: translateX(-8px)
            }

            40% {
                transform: translateX(8px)
            }

            60% {
                transform: translateX(-6px)
            }

            80% {
                transform: translateX(4px)
            }
        }

        .shake {
            animation: shake .4s ease;
        }
    </style>
</head>

<body>
    <div class="bg-glow"></div>
    <div class="bg-grid"></div>

    <div class="login-card" id="login-card">
        <!-- Logo -->
        <div class="login-logo">
            <svg id="adp-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 60">
                <path
                    d="M81.952 21.15H78.08v3.87h3.873a1.66 1.66 0 0 1 1.659 1.663c0 .92-.74 1.66-1.66 1.66H78.08v3.872h3.873c3.056 0 5.532-2.478 5.532-5.532s-2.476-5.532-5.532-5.532zM59.88 41.624c4.636 0 8.632-2.715 10.5-6.645h4.937v6.645h2.764V34.98h3.873a8.3 8.3 0 0 0 8.301-8.297 8.3 8.3 0 0 0-8.301-8.299h-6.637v9.96h-3.94a11.62 11.62 0 0 0-11.497-9.959H46.26L32.7 41.624h3.232l3.872-6.645h13.923v6.645zm34.247-14.942c0 6.72-5.45 12.17-12.174 12.17V45.5h-10.5v-5.2c-2.843 3.2-6.966 5.2-11.563 5.2H49.865v-6.638h-7.827L38.166 45.5H25.873l18.07-30.98H59.88c4.598 0 8.72 2.006 11.564 5.184V14.5h10.5a12.18 12.18 0 0 1 12.174 12.172zM49.865 21.15v7.2h-6.178l-2.256 3.872h12.307V21.15zM68.734 30c0 4.9-3.966 8.85-8.854 8.85h-3.376v-3.87h3.376A4.98 4.98 0 0 0 64.862 30c0-2.747-2.23-4.98-4.982-4.98h-3.376v-3.87h3.376c4.888 0 8.854 3.962 8.854 8.85"
                    fill="currentColor" />
            </svg>
            <span class="login-logo-text">SENSELENSE</span>
        </div>

        <h1>Welcome back</h1>
        <p class="login-sub">Sign in to your employee account to continue</p>

        <!-- Avatar -->
        <div class="avatar-section">
            <label class="avatar-preview" id="avatar-preview" for="avatar-file" title="Upload photo">
                <span id="avatar-initials">?</span>
                <img id="avatar-img" src="" alt="" style="display:none" />
                <div class="avatar-upload-hint">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z" />
                        <circle cx="12" cy="13" r="4" />
                    </svg>
                </div>
                <input type="file" id="avatar-file" accept="image/*" />
            </label>
            <div class="avatar-info">
                <strong>Profile Photo</strong>
                Click the circle to upload a photo<br />or we'll use your initials
            </div>
        </div>

        <!-- Form -->
        <form id="login-form" autocomplete="off">
            <div class="field">
                <label for="inp-name">Full Name</label>
                <div class="input-wrap">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                        <circle cx="12" cy="7" r="4" />
                    </svg>
                    <input type="text" id="inp-name" placeholder="e.g. Sarah Johnson" required autocomplete="off" />
                </div>
            </div>
            <div class="field">
                <label for="inp-role">Job Title / Role</label>
                <div class="input-wrap">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <rect x="2" y="7" width="20" height="14" rx="2" />
                        <path d="M16 7V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2" />
                    </svg>
                    <input type="text" id="inp-role" placeholder="e.g. Senior Sales Rep" required autocomplete="off" />
                </div>
            </div>

            <button type="submit" class="btn-login" id="login-btn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4" />
                    <polyline points="10 17 15 12 10 7" />
                    <line x1="15" y1="12" x2="3" y2="12" />
                </svg>
                Enter SenseLense
            </button>
        </form>

        <p class="login-footer-note">Your session is stored locally on this device.</p>
    </div>

    <script>
        const AVATAR_COLORS = ['#CC0000', '#2563EB', '#059669', '#7C3AED', '#D97706', '#DC2626', '#0891B2'];

        /* Auto-update initials as user types */
        const nameInput = document.getElementById('inp-name');
        const initialsEl = document.getElementById('avatar-initials');
        const avatarPreview = document.getElementById('avatar-preview');

        function getInitials(name) {
            return name.trim().split(/\s+/).map(w => w[0]).join('').toUpperCase().slice(0, 2) || '?';
        }

        nameInput.addEventListener('input', () => {
            const initials = getInitials(nameInput.value);
            initialsEl.textContent = initials;
            // Pick a stable color based on first character
            const idx = (nameInput.value.charCodeAt(0) || 0) % AVATAR_COLORS.length;
            avatarPreview.style.background = `linear-gradient(135deg, ${AVATAR_COLORS[idx]}, color-mix(in srgb, ${AVATAR_COLORS[idx]} 60%, black))`;
        });

        /* Photo upload */
        let avatarDataUrl = null;
        document.getElementById('avatar-file').addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = (ev) => {
                avatarDataUrl = ev.target.result;
                const img = document.getElementById('avatar-img');
                img.src = avatarDataUrl;
                img.style.display = 'block';
                initialsEl.style.display = 'none';
            };
            reader.readAsDataURL(file);
        });

        /* Form submit */
        document.getElementById('login-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const name = nameInput.value.trim();
            const role = document.getElementById('inp-role').value.trim();
            if (!name || !role) {
                document.getElementById('login-card').classList.add('shake');
                setTimeout(() => document.getElementById('login-card').classList.remove('shake'), 400);
                return;
            }

            const initials = getInitials(name);
            const colorIdx = (name.charCodeAt(0) || 0) % AVATAR_COLORS.length;
            const user = {
                name,
                role,
                initials,
                color: AVATAR_COLORS[colorIdx],
                avatar: avatarDataUrl || null,
                loginTime: new Date().toISOString()
            };
            localStorage.setItem('sl-user', JSON.stringify(user));
            window.location.replace('index.html');
        });
    </script>
</body>

</html>